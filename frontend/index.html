<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>家庭物料管理系统</title>
    <link rel="stylesheet" href="style.css">
    <!-- 引入图标库 -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- 主脚本文件将在组件之后加载 -->
</head>
<body>
    <!-- 顶部导航栏 -->
    <header class="navbar">
        <div class="nav-brand">
            <i class="fas fa-home"></i>
            <h1>家庭物料管理系统</h1>
        </div>
    </header>

    <div class="container">
        <!-- 侧边栏 - 功能菜单 -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h3><i class="fas fa-cog"></i> 功能菜单</h3>
            </div>
            
            <div class="sidebar-menu">
                <div class="menu-item" id="dashboardMenu">
                    <i class="fas fa-chart-line"></i>
                    <span>仪表盘</span>
                </div>
                <div class="menu-item" id="materialsMenu">
                    <i class="fas fa-boxes"></i>
                    <span>物料管理</span>
                </div>
                <div class="menu-item" id="inventoryMenu">
                    <i class="fas fa-clipboard-list"></i>
                    <span>库存管理</span>
                </div>
                <div class="menu-item" id="storageOverviewMenu">
                    <i class="fas fa-database"></i>
                    <span>存储空间总览</span>
                </div>
            </div>
            

        </aside>

        <!-- 主内容区 -->
        <main class="main-content">

            <!-- 存储空间总览区域 -->
            <section class="storage-overview-section" id="storageOverviewSection" style="display: none;">
                <div class="section-header">
                    <h3><i class="fas fa-database"></i> 存储空间总览</h3>
                </div>

            <!-- 当前位置显示 -->
            <section class="breadcrumb">
                <div id="mainCurrentPath">请选择实验室或容器查看物品</div>
            </section>
                
                
                <!-- 子容器列表 -->
                <div id="storageContainersSection" class="containers-section" style="display: none;">
                    <div class="section-header">
                        <h3><i class="fas fa-layer-group"></i> 储物空间列表</h3>
                        <div class="item-actions">
                            <div class="container-count">
                                <span id="storageContainerCount">0</span> 个容器
                            </div>
                            <button id="addContainerBtn" class="btn btn-primary">
                                <i class="fas fa-plus"></i> 添加容器
                            </button>
                        </div>
                    </div>
                    <div id="storageContainersGrid" class="containers-grid">
                        <!-- 子容器卡片将在这里动态生成 -->
                    </div>
                </div>
                
                <!-- 物品列表 -->
                <div id="storageItemsSection" class="content-section" style="display: none;">
                    <div class="section-header">
                        <h3><i class="fas fa-boxes"></i> 物品列表</h3>
                        <div class="item-actions">
                            <div class="item-count">
                                <span id="storageItemCount">0</span> 个物品
                            </div>
                            <button id="addItemBtn" class="btn btn-primary">
                                <i class="fas fa-plus"></i> 添加物品
                            </button>
                        </div>
                    </div>
                    <div id="storageItemsTableContainer">
                        <!-- ItemTable will render its content here -->
                    </div>
                </div>
            </section>

            <!-- 物品表格区域 -->
            <section class="content-section" style="display: none;">
                <div class="section-header">
                    <h3><i class="fas fa-boxes"></i> 物品列表</h3>
                    <div class="item-actions">
                        <div class="item-count">
                            <span id="itemCount">0</span> 个物品
                        </div>
                        <button id="addItemToContainerBtn" class="btn btn-primary" style="display: none;">
                            <i class="fas fa-plus"></i> 添加物品到此容器
                        </button>
                    </div>
                </div>
                <div id="itemTableContainer">
                    <div class="empty-state">
                        <i class="fas fa-inbox fa-3x"></i>
                        <p>选择左侧的实验室或容器查看物品</p>
                    </div>
                </div>
            </section>

            <!-- 仪表盘区域 -->
            <section class="dashboard-section" id="dashboardSection" style="display: none;">
                <div class="section-header">
                    <h3><i class="fas fa-chart-line"></i> 仪表盘</h3>
                </div>
                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <div class="card-header">
                            <i class="fas fa-home"></i> 房间总数
                        </div>
                        <div class="card-value" id="totalRooms">0</div>
                    </div>
                    <div class="dashboard-card">
                        <div class="card-header">
                            <i class="fas fa-archive"></i> 容器总数
                        </div>
                        <div class="card-value" id="totalContainers">0</div>
                    </div>
                    <div class="dashboard-card">
                        <div class="card-header">
                            <i class="fas fa-boxes"></i> 物品种类
                        </div>
                        <div class="card-value" id="totalMaterials">0</div>
                    </div>
                    <div class="dashboard-card">
                        <div class="card-header">
                            <i class="fas fa-box"></i> 物品总数
                        </div>
                        <div class="card-value" id="totalItems">0</div>
                    </div>
                    <div class="dashboard-card">
                        <div class="card-header">
                            <i class="fas fa-exclamation-triangle"></i> 库存预警
                        </div>
                        <div class="card-value" id="lowInventory">0</div>
                    </div>
                    <div class="dashboard-card">
                        <div class="card-header">
                            <i class="fas fa-plus"></i> 今日入库
                        </div>
                        <div class="card-value" id="todayIn">0</div>
                    </div>
                    <div class="dashboard-card">
                        <div class="card-header">
                            <i class="fas fa-minus"></i> 今日出库
                        </div>
                        <div class="card-value" id="todayOut">0</div>
                    </div>
                </div>
            </section>

            <!-- 物料管理区域 -->
            <section class="materials-section" id="materialsSection" style="display: none;">
                <div class="section-header">
                    <h3><i class="fas fa-boxes"></i> 物料管理</h3>
                    <div class="item-actions">
                        <div class="search-box inline">
                            <input type="text" id="materialsSearchInput" placeholder="搜索物料名称...">
                            <button id="materialsSearchBtn" class="btn btn-primary">
                                <i class="fas fa-search"></i> 搜索
                            </button>
                        </div>
                    </div>
                </div>
                <div id="materialsTableContainer">
                    <!-- 物料表格将在这里动态生成 -->
                </div>
            </section>

            <!-- 库存管理区域 -->
            <section class="inventory-section" id="inventorySection" style="display: none;">
                <div class="section-header">
                    <h3><i class="fas fa-clipboard-list"></i> 库存管理</h3>
                    <div class="action-buttons">
                        <button id="addInRecordBtn" class="btn btn-primary">
                            <i class="fas fa-inbox"></i> 入库
                        </button>
                        <button id="addOutRecordBtn" class="btn btn-secondary">
                            <i class="fas fa-outbox"></i> 出库
                        </button>
                    </div>
                </div>
                
                <!-- 库存记录表格 -->
                <div id="inventoryTableContainer">
                    <div class="table-container">
                        <table id="inventoryTable" class="items-table">
                            <thead>
                                <tr>
                                    <th>记录ID</th>
                                    <th>出入库类型</th>
                                    <th>物品ID</th>
                                    <th>物品名</th>
                                    <th>数量</th>
                                    <th>原因</th>
                                    <th>日期</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody id="inventoryTableBody">
                                <!-- 记录将在这里动态生成 -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- 搜索结果区域 -->
            <section class="search-results-section" id="searchResults" style="display: none;">
                <div class="section-header">
                    <h3><i class="fas fa-search"></i> 搜索结果</h3>
                    <button id="closeSearch" class="btn btn-secondary">
                        <i class="fas fa-times"></i> 关闭搜索
                    </button>
                </div>
                <div id="searchResultsContainer"></div>
            </section>
        </main>
    </div>

    <!-- 物品表单模态框 -->
    <div id="itemModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">添加物品</h3>
                <span class="modal-close">&times;</span>
            </div>
            <div class="modal-body">
                <!-- 表单内容将由JavaScript动态生成 -->
            </div>
        </div>
    </div>

    <!-- 容器表单模态框 -->
    <div id="containerModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">添加容器</div>
                <button class="modal-close" aria-label="Close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <!-- 表单内容将动态生成 -->
            </div>
        </div>
    </div>

    <!-- 库存记录模态框 -->
    <div id="inventoryRecordModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div id="inventoryRecordModalTitle" class="modal-title">添加库存记录</div>
                <button class="modal-close" aria-label="Close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="inventoryRecordForm">
                    <input type="hidden" id="recordType" name="status" value="in">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="recordItemName">
                                <i class="fas fa-box"></i>
                                物品名称
                            </label>
                            <input type="text" id="recordItemName" name="itemName" placeholder="请输入物品名称" list="itemNameList">
                            <datalist id="itemNameList"></datalist>
                        </div>
                        <div class="form-group">
                            <label for="recordItemId">
                                <i class="fas fa-hashtag"></i>
                                物品ID
                            </label>
                            <input type="text" id="recordItemId" name="itemId" placeholder="请输入物品ID" list="itemIdList">
                            <datalist id="itemIdList"></datalist>
                            <span id="itemIdError" class="form-error"></span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="recordLocation">
                            <i class="fas fa-map-marker-alt"></i>
                            位置
                        </label>
                        <input type="text" id="recordLocation" name="location" readonly placeholder="自动显示位置">
                    </div>
                    <div class="form-group">
                        <label for="recordQuantity">
                            <i class="fas fa-sort-numeric-up-alt"></i>
                            修改数量
                        </label>
                        <div class="quantity-row">
                            <input type="number" id="recordQuantity" name="quantity" placeholder="请输入数量">
                            <div class="current-quantity">
                                <span class="current-quantity-label">现有数量:</span>
                                <span id="currentQuantityValue" class="current-quantity-value">0</span>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="recordReason">
                            <i class="fas fa-comment-alt"></i>
                            原因
                        </label>
                        <textarea id="recordReason" name="reason" rows="3" placeholder="请输入原因"></textarea>
                    </div>
                    <div class="modal-actions">
                        <button type="submit" class="btn btn-primary" id="saveRecordBtn">提交</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- 确认删除模态框 -->
    <div id="confirmModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">确认操作</h3>
                <span class="modal-close">&times;</span>
            </div>
            <div class="modal-body">
                <p id="confirmMessage">确定要执行此操作吗？</p>
                <div class="form-actions">
                    <button class="btn btn-secondary" id="confirmCancel">取消</button>
                    <button class="btn btn-danger" id="confirmOk">确定</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 物料详情模态框 -->
    <div id="materialDetailsModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="materialDetailsModalTitle">物料详情</h3>
                <span class="modal-close">&times;</span>
            </div>
            <div class="modal-body" id="materialDetailsModalBody">
                <!-- 详情内容将由JavaScript动态生成 -->
            </div>
            <div class="modal-footer">
                
            </div>
        </div>
    </div>

    <!-- 加载脚本 - 确保顺序正确 -->
    <script type="module" src="script.js"></script>
</body>
</html>